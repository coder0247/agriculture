<app-header-common></app-header-common>
<div class="main-content shop-page main-content-grid">
		<div class="container">
			<div class="breadcrumbs">
                    <a href="user/account">My Account</a>
			</div>
			<div class="row">
				<div class="col-xs-12 col-sm-7 col-md-8 col-lg-9 content-offset">
					<div class="categories-content">
						<h4 class="shop-title">Edit Ad</h4>
                        <div class="row content-form ">
                        
                              
                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 info-content">
                                    <form [formGroup]="newadForm" class="addnewproduct register-form editproductdetail" (ngSubmit)="addnewproduct()"> 
                                    <div class="contact-form">
                                        <h4 class="main-title">Product Details</h4>
                                        <h5 class="note-title">( * ) Required fields</h5>
                                        <div class="row">
                                                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                        <span class="label-text">Category <span>*</span></span>
                                                        <ng-select [searchable]="false" #categorySelect [items]="mainCats" [selectOnTab]="true" bindLabel="catname" bindValue="_id"
												 placeholder="Select category" formControlName="category" (change)="getSubcatList($event._id)">
                                                </ng-select>
                                                <div *ngIf="!newadForm.valid && forcevalidation" class="error-msg">
                                                    <div *ngIf="newadForm.controls['category'].pristine && newadForm.controls['category'].errors.required">Category is required.</div>
                                                  </div>
                                                    </div>
                                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                            <span class="label-text">Sub Category <span>*</span></span>
                                                            <ng-select [searchable]="false" #cropsSelect [items]="subCats" [selectOnTab]="true" bindLabel="subcatname" bindValue="_id"
												 placeholder="Select subcategory" formControlName="subcatnames" (change)="getSubcatimages($event)">
                                                </ng-select>
                                                <div *ngIf="!newadForm.valid && forcevalidation" class="error-msg">
                                                        <div *ngIf="newadForm.controls['subcatnames'].pristine && newadForm.controls['subcatnames'].errors.required">Subcategory is required.</div>
                                                      </div>
                                                        </div>
                                        </div>
                                        <div class="row">
                                            <!-- <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                <span class="label-text">Crop</span>
                                                <ng-select [searchable]="false"  #cropsSelect [items]="crops"
                                                        [selectOnTab]="true"
                                                        bindLabel="cropname"
                                                        bindValue="_id"
                                                        placeholder="Select crop"
                                                        formControlName="crop">
                                                        </ng-select>
                                            </div> -->
                                            <div class="col-xs-12 ">
                                                <span class="label-text">Region <span>*</span></span>
                                             
                                                        <ng-select [searchable]="false"  #regionSelect [items]="regions"
                                                        [selectOnTab]="true"
                                                        bindLabel="regionname"
                                                        bindValue="_id"
                                                        placeholder="Select region"
                                                        formControlName="region">
                                                      </ng-select>
                                                      <div *ngIf="!newadForm.valid && forcevalidation" class="error-msg">
                                                            <div *ngIf="newadForm.controls['region'].pristine && newadForm.controls['region'].errors.required">Region is required.</div>
                                                          </div>
                                                
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                    <span class="label-text">Name <span>*</span></span>
                                                    <input type="text" class="input-info"  formControlName="productname">
                                                    <div *ngIf="!newadForm.valid && forcevalidation" class="error-msg">
                                                            <div *ngIf="newadForm.controls['productname'].pristine && newadForm.controls['productname'].errors?.required">Name is required.</div>
                                                            <div *ngIf="newadForm.controls['productname'].dirty && newadForm.controls['productname'].errors?.required">Name is required.</div>
                                                          </div>
                                                          <!-- <div *ngIf="newadForm.controls['productname'].errors && !newadForm.controls['productname'].pristine" class="error-msg">
                                                                <div [hidden]="!newadForm.controls['productname'].errors.required">Name is required.</div>
                                                              </div> -->
                                            </div>
                                           
                                        </div>
                                        <div class="row">
                                                <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                                                        <span class="label-text">Amount For Sale <span>*</span></span>
                                                        <input type="number" class="input-info"  formControlName="saleamount">
                                                        <div *ngIf="!newadForm.valid && forcevalidation" class="error-msg">
                                                                <div *ngIf="newadForm.controls['saleamount'].pristine && newadForm.controls['saleamount'].errors.required">Amount For Sale is required.</div>
                                                                <div *ngIf="newadForm.controls['saleamount'].dirty && newadForm.controls['saleamount'].errors?.required">Amount For Sale is required.</div>
                                                              </div>  
                                                </div>
                                                <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                                                        <span class="label-text">Amount Unit <span>*</span></span>
                                                        <ng-select [searchable]="false"  #amountforsale [items]="amtforsale"
                                                        [selectOnTab]="true"
                                                        bindLabel="amountunit"
                                                        bindValue="_id"
                                                        placeholder="Select Amount Unit"
                                                        formControlName="amtunit">
                                                    </ng-select>
                                                    <div *ngIf="!newadForm.valid && forcevalidation" class="error-msg">
                                                            <div *ngIf="newadForm.controls['amtunit'].pristine && newadForm.controls['amtunit'].errors.required">Amount Unit is required.</div>
                                                          </div>  
                                                    </div>
                                                <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                                                        <span class="label-text">Price Per Unit <span>*</span></span>
                                                        <input type="number" class="input-info"  formControlName="unitprice">
                                                        <div *ngIf="!newadForm.valid && forcevalidation" class="error-msg">
                                                                <div *ngIf="newadForm.controls['unitprice'].pristine && newadForm.controls['unitprice'].errors.required">Price Per Unit is required.</div>
                                                                <div *ngIf="newadForm.controls['unitprice'].dirty && newadForm.controls['unitprice'].errors?.required">Price Per Unit is required.</div>
                                                              </div>  
                                                </div>
                                        </div>
                                        
                                        
                                    </div>
                                    <div class="group-button">
                                            <button href="#" class="button submit" >
                                                <span *ngIf="updatingstatus">Updating...</span>
                                                <span *ngIf="!updatingstatus">Submit</span>
                                            </button>
                                          </div>
                          
                                </form>
                                <div class="alert alert-success" role="alert" *ngIf="uploadsuccess">
                                        <strong>New Ad : </strong> New Ad Posted Successfully 
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 map-content" *ngIf="!!defaultproductimage">
                                    <div *ngIf="!uploader?.queue?.length">
                                            <h3>Current product image</h3>
                                            <!-- <small>If you dont' have product image then this will the default products image.</small> -->
                                            <img src="{{defaultproductimage}}" alt="default product image">
                                    </div>
                                    <h3>Upload product image</h3>
                                    <small>I want to upload New product image.</small>
                                    <div class="alert alert-danger" role="alert" *ngIf="showimageerror">
                                            <strong>Image Error : </strong> Please upload product image (Allowed Extension: .JPG) 
                                        </div>
                                        
                                        
                                    <input type="file" name="file" ng2FileSelect [uploader]="uploader"  *ngIf="uploader?.queue?.length < 1"/>
                                    <table class="table" *ngIf="uploader?.queue?.length">
                                            <thead>
                                            <tr>
                                                <th width="50%">Name</th>
                                               
                                                
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let item of uploader.queue">
                                                    <div class="map" *ngIf="uploader?.queue?.length">
                                        
                                                            <img src="" imgPreview [image]="item?._file" class="media-object" />
                                                            <div class="media-body">
                                                                   <p>{{ item?.file?.name }}</p>
                                                               </div>
                                                           </div>
                                                
                                                <td *ngIf="uploader.isHTML5" nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                                                <!-- <td *ngIf="uploader.isHTML5">
                                                    <div class="progress" style="margin-bottom: 0;">
                                                        <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': item.progress + '%' }"></div>
                                                    </div>
                                                </td> -->
                                                <td class="text-center">
                                                   <span *ngIf="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>   
                                                    <span *ngIf="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                                                    <span *ngIf="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                                                </td>
                                                <td nowrap class="buttonblock">
                                                    <button type="button" class="btn btn-success btn-xs"
                                                            (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
                                                        <span class="glyphicon glyphicon-upload"></span> Upload
                                                    </button> 
                                                    <button type="button" class="btn btn-warning btn-xs"
                                                            (click)="item.cancel()" [disabled]="!item.isUploading">
                                                        <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                                                    </button> 
                                                    <button type="button" class="btn btn-danger btn-xs"
                                                            (click)="item.remove()">
                                                        <span class="glyphicon glyphicon-trash"></span> Remove
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                           <div *ngIf="uploader?.queue?.length">
                                                <div>

                                                    <div class="progress" >
                                                        <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
                                                    </div>
                                                </div>
                                            </div>
                                    
                                </div>
                            </div>
                        <!-- <div class="product-container auto-clear grid-style equal-container box-has-content">
                        
                            <h5>Product Image</h5>
                            <div class="alert alert-danger" role="alert" *ngIf="showimageerror">
                                <strong>Image Error : </strong> Please upload product image (Allowed Extension: .JPG) </div>
                        
                        
                        </div> -->
					</div>
				</div>
      <!-- sidebar -->
      <app-sidebar></app-sidebar>
      <!-- /sidebar-->
			</div>
		</div>
	</div>
	<app-footer></app-footer>